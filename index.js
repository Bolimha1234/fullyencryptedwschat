var io=require("socket.io-client");const chalke=require("chalk"),chalk=new chalke.Instance({enabled:!0,level:3}),CryptoJS=require("crypto-js");var socket=io("https://incog-server.contadecsgode.repl.co");const readline=require("readline"),rl=readline.createInterface({input:process.stdin,output:process.stdout});var id="",buffer="",password="";function chat(){rl.question(chalk.green("Â» "),e=>{"//clear"===e.toLocaleLowerCase()?(console.clear(),chat()):(buffer=`${chalk.cyan(id)}: ${e}`,socket.emit("message",CryptoJS.AES.encrypt(buffer,password).toString()),chat())})}socket.on("connect",()=>{rl.question("Password:",e=>{password=e,rl.question("What's your name? ",e=>{socket.emit("message",CryptoJS.AES.encrypt(`${chalk.green(e)} has joined the chat.`,password).toString()),id=e,chat()})}),socket.on("msg",function(e){buffer!==CryptoJS.AES.decrypt(e,password).toString(CryptoJS.enc.Utf8)&&(console.log("\n"+CryptoJS.AES.decrypt(e,password).toString(CryptoJS.enc.Utf8)),chat())})}),process.on("exit",()=>{""!==id&&""!==id&&socket.emit("message",CryptoJS.AES.encrypt(`${chalk.red(id)} has leaved the chat.`,password).toString()),process.exit()}),process.on("SIGINT",()=>{""!==id&&socket.emit("message",CryptoJS.AES.encrypt(`${chalk.red(id)} has leaved the chat.`,password).toString()),process.exit()}),process.on("SIGUSR1",()=>{""!==id&&socket.emit("message",CryptoJS.AES.encrypt(`${chalk.red(id)} has leaved the chat.`,password).toString()),process.exit()}),process.on("SIGUSR2",()=>{""!==id&&socket.emit("message",CryptoJS.AES.encrypt(`${chalk.red(id)} has leaved the chat.`,password).toString()),process.exit()}),process.on("uncaughtException",()=>{""!==id&&socket.emit("message",CryptoJS.AES.encrypt(`${chalk.red(id)} has leaved the chat.`,password).toString()),process.exit()}),process.on("SIGTERM",()=>{""!==id&&socket.emit("message",CryptoJS.AES.encrypt(`${chalk.red(id)} has leaved the chat.`,password).toString()),process.exit()});